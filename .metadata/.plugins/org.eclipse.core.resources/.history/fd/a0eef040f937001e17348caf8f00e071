package di_p;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;

public class StudentMyBeanPostProcessor implements BeanPostProcessor {

	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
		//System.out.println("StudentMyBeanPostProcessor.BeforeInit 실행:"+beanName+" => " + bean);
		/*
		if(bean.getClass().getName().equals("di_p.Student2")) {
			System.out.println(bean+"우산인가");
			
			Umbrella uu = (Umbrella)bean;
			
			if(uu.getPrice() >= 5000) {
				uu.setType("비싸");
			}
			
		}
		*/
		return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName);
	}
	
	@Override
	public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
		
		//System.out.println("StudentMyBeanPostProcessor.AfterInit 실행:"+beanName+" => " + bean);
		
		if(bean.getClass().getName().equals("di_p.Student2")) {
			System.out.println(bean+" After 학생인가");
			Student2 st = (Student2)bean;
			
			if(st.getName().contains("red")) {
				System.out.println(" yellow 포함 확인. 등급을 수,우,미,양,가 로 처리하겠습니다");
				if(st.getAvg()>=90) {
					st.setGrade("수");
				}
				else if(st.getAvg()>=80) {
					st.setGrade("우");
				}
				else if(st.getAvg()>=70) {
					st.setGrade("미");
				}
				else if(st.getAvg()>=60) {
					st.setGrade("양");
				}
				else {
					st.setGrade("가");
				}

			}
			
			if(st.getName().contains("blue")) {
				System.out.println(" yellow 포함 확인. 등급을 A,B,C,D,E 로 처리하겠습니다");
				float b_avg = st.getAvg();
				grade = "가가가가가가양미우수수".charAt(avg/10)+"";  //평균을 10으로 나눴을때 나오는 몫에 해당하는 문자를 할당
				String gd = "EEEEEDCBAA".charAt(b_avg/10.0)+"";
				if(st.getAvg()>=90) {
					st.setGrade("A");
				}
				else if(st.getAvg()>=80) {
					st.setGrade("B");
				}
				else if(st.getAvg()>=70) {
					st.setGrade("C");
				}
				else if(st.getAvg()>=60) {
					st.setGrade("D");
				}
				else {
					st.setGrade("E");
				}
				
			}
			
			if(st.getName().contains("yellow")) {
				System.out.println(" yellow 포함 확인. 등급을 1,2,3,4,5 로 처리하겠습니다");
				if(st.getAvg()>=90) {
					st.setGrade("1");
				}
				else if(st.getAvg()>=80) {
					st.setGrade("2");
				}
				else if(st.getAvg()>=70) {
					st.setGrade("3");
				}
				else if(st.getAvg()>=60) {
					st.setGrade("4");
				}
				else {
					st.setGrade("5");
				}
				
			}
			
		}
		
		return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);
	}
}
